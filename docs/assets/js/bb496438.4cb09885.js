"use strict";(globalThis.webpackChunkdocusaurus_wiki=globalThis.webpackChunkdocusaurus_wiki||[]).push([[9845],{744(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"how_to_guides/ROS_RVIZ","title":"Visualize Point Cloud with RVIZ","description":"Overview","source":"@site/docs/how_to_guides/ROS_RVIZ.md","sourceDirName":"how_to_guides","slug":"/how_to_guides/ROS_RVIZ","permalink":"/dev/docs/how_to_guides/ROS_RVIZ","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12},"sidebar":"howToSidebar","previous":{"title":"Use PandarView","permalink":"/dev/docs/how_to_guides/PandarView"},"next":{"title":"Use LidarUtilities","permalink":"/dev/docs/how_to_guides/LidarUtilities"}}');var s=i(4848),o=i(8453),r=i(9030);const a={sidebar_position:12},l="Visualize Point Cloud with RVIZ",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Application Method",id:"application-method",level:2},{value:"Environment Preparation",id:"environment-preparation",level:3},{value:"Build the ROS Project",id:"build-the-ros-project",level:3},{value:"Modify the <code>config.yaml</code> File",id:"modify-the-configyaml-file",level:3},{value:"Compile and Run RVIZ",id:"compile-and-run-rviz",level:3},{value:"Point Cloud Check",id:"point-cloud-check",level:3},{value:"Common RVIZ Issues Troubleshooting",id:"common-rviz-issues-troubleshooting",level:2},{value:"Unable to Execute catkin_make",id:"unable-to-execute-catkin_make",level:3},{value:"Unable to Execute source devel/setup.bash",id:"unable-to-execute-source-develsetupbash",level:3},{value:"RVIZ Window Opens but No Point Cloud is Displayed",id:"rviz-window-opens-but-no-point-cloud-is-displayed",level:3}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"visualize-point-cloud-with-rviz",children:"Visualize Point Cloud with RVIZ"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",className:"numbered-heading","data-number":"1","data-text":"Overview","data-toc-number":"1",children:"1 Overview"}),"\n",(0,s.jsx)(n.p,{children:"Hesai provides the HesaiLidar_ROS_2.0 development kit, offering developers a complete solution for applying lidar data in the RVIZ visualization tool under ROS (Robot Operating System) framework in an Ubuntu system environment."}),"\n",(0,s.jsx)(n.p,{children:"This document systematically introduces the setup process of the RVIZ tool in the ROS environment, point cloud visualization configuration methods and general troubleshooting methods for common issues, with the purpose to help developers quickly deploy ROS-based LiDAR application systems."}),"\n",(0,s.jsx)(n.h2,{id:"application-method",className:"numbered-heading","data-number":"2","data-text":"Application Method","data-toc-number":"2",children:"2 Application Method"}),"\n",(0,s.jsx)(n.p,{children:"The setup and configuration process for the RVIZ visualization tool is as follows:"}),"\n",(0,s.jsx)(n.h3,{id:"environment-preparation",className:"numbered-heading","data-number":"2.1","data-text":"Environment Preparation","data-toc-number":"2.1",children:"2.1 Environment Preparation"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Prepare a PC with Ubuntu installed and set up the ROS environment."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["Note: For ROS installation methods, refer to ",(0,s.jsx)(n.a,{href:"http://wiki.ros.org",children:"http://wiki.ros.org"}),"."]})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Check the ROS version:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"ROS1"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["User can check the current ROS1 version by entering ",(0,s.jsx)(n.strong,{children:"roscore"})," in the terminal, as shown below:"]}),"\n",(0,s.jsx)("img",{src:(0,r.Ay)("/img/ROS1_2.1.png"),alt:"ROS1_version_check",style:{display:"block",margin:"0 auto",width:"auto"}}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"ROS2"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["User can check the current ROS2 version by entering ",(0,s.jsx)(n.strong,{children:"printenv ROS_DISTRO"})," in the terminal, as shown below:"]}),"\n",(0,s.jsx)("img",{src:(0,r.Ay)("/img/ros2_1.png"),alt:"ros2_1",style:{display:"block",margin:"0 auto",width:"auto"}}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"3. Connect the lidar"}),": For the detailed lidar connection configuration methods, refer to ",(0,s.jsx)(n.a,{href:"/dev/docs/how_to_guides/network_config",children:"Configure Ethernet"})," or ",(0,s.jsx)(n.a,{href:"/dev/docs/how_to_guides/serial_port_config",children:"Configure Serial Connection"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"build-the-ros-project",className:"numbered-heading","data-number":"2.2","data-text":"Build the ROS Project","data-toc-number":"2.2",children:"2.2 Build the ROS Project"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Install Boost"})}),"\n",(0,s.jsxs)(n.p,{children:["Run the following commands to install ",(0,s.jsx)(n.em,{children:"Boost"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install libboost-all-dev\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Install Yaml"})}),"\n",(0,s.jsxs)(n.p,{children:["Run the following commands to install ",(0,s.jsx)(n.em,{children:"Yaml"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install -y libyaml-cpp-dev\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Clone HesaiLidar_ROS_2.0"})}),"\n",(0,s.jsxs)(n.p,{children:["Create a new folder and a ",(0,s.jsx)(n.code,{children:"src"})," subfolder."]}),"\n",(0,s.jsxs)(n.p,{children:["Navigate to the ",(0,s.jsx)(n.code,{children:"src"})," directory, open the terminal, and execute the following command to download ",(0,s.jsx)(n.strong,{children:"HesaiLidar_ROS_2.0"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"git clone --recurse-submodules https://github.com/HesaiTechnology/HesaiLidar_ROS_2.0.git\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"modify-the-configyaml-file",className:"numbered-heading","data-number":"2.3","data-text":"Modify the ","data-toc-number":"2.3",children:["2.3 Modify the ",(0,s.jsx)(n.code,{children:"config.yaml"})," File"]}),"\n",(0,s.jsxs)(n.p,{children:["Navigate to the downloaded HesaiLidar_ROS_2.0 project folder, open the ",(0,s.jsx)(n.code,{children:"config.yaml"})," file and configure the relevant parameters as follows:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'lidar:\n  - driver:\n      use_gpu: false\n      source_type: 1                         # 1: Real-time connection to lidar\n                                             # 2: Use pcap file playback\n                                             # 3: Use point cloud data in ROS bag\n                                             # 4: Obtain point cloud data via serial communication\n      lidar_udp_type:                        # Configure the lidar\'s UDP type\n      device_ip_address: 192.168.1.201       # lidar\'s IP address        \n      udp_port: 2368                         # UDP communication port\n      ptc_port: 9347                         # PTC protocol port  \n      multicast_ip_address: 255.255.255.255  # Multicast IP address\n      use_ptc_connected: true                # Configure whether to use PTC connection\n\xb7\xb7\xb7 \xb7\xb7\xb7\n\n# 2. Serial communication configuration, modify to the serial port name\n      serial_type:\n        rs485_com: "Your serial port name for receiving point cloud" # RS485 serial port name\n        rs232_com: "Your serial port name for sending cmd"           # RS232 serial port name\n        point_cloud_baudrate: 3000000/3125000                        # Serial port baud rate\n\xb7\xb7\xb7 \xb7\xb7\xb7 \n'})}),"\n",(0,s.jsx)(n.h3,{id:"compile-and-run-rviz",className:"numbered-heading","data-number":"2.4","data-text":"Compile and Run RVIZ","data-toc-number":"2.4",children:"2.4 Compile and Run RVIZ"}),"\n",(0,s.jsx)(n.p,{children:"Navigate back to the root directory of the folder and run the following commands:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. ROS1"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"  catkin_make\n  source devel/setup.bash\n  roslaunch hesai_ros_driver start.launch\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. ROS2"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"colcon build --symlink-install\n. install/local_setup.bash\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["Note: In ",(0,s.jsx)(n.code,{children:". install/local_setup.bash"}),", there is a space between ",(0,s.jsx)(n.code,{children:"."})," and ",(0,s.jsx)(n.code,{children:"install"}),"."]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.em,{children:"For ROS2-Dashing"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch hesai_ros_driver dashing_start.py\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.em,{children:"For Other ROS2 Versions"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch hesai_ros_driver start.py\n"})}),"\n",(0,s.jsx)(n.h3,{id:"point-cloud-check",className:"numbered-heading","data-number":"2.5","data-text":"Point Cloud Check","data-toc-number":"2.5",children:"2.5 Point Cloud Check"}),"\n",(0,s.jsx)(n.p,{children:"After completing the above steps, user can use RVIZ to view the real-time point cloud from the lidar."}),"\n",(0,s.jsx)(n.p,{children:"When opening the RVIZ interface, user needs to configure the parameters of 'Frame' and 'Topic' first. The specific operation steps are shown in the numbers indicated in the image below:"}),"\n",(0,s.jsx)("img",{src:(0,r.Ay)("/img/ROS1_3_1.png"),alt:"ROS1_3_1",style:{display:"block",margin:"0 auto",width:"auto"}}),"\n",(0,s.jsx)(n.p,{children:"After completing the above configurations, user can view the point cloud data in RVIZ's main interface, as shown below:"}),"\n",(0,s.jsx)("img",{src:(0,r.Ay)("/img/ROS1_3_2.png"),alt:"ROS1_3_2",style:{display:"block",margin:"0 auto",width:"auto"}}),"\n",(0,s.jsx)(n.h2,{id:"common-rviz-issues-troubleshooting",className:"numbered-heading","data-number":"3","data-text":"Common RVIZ Issues Troubleshooting","data-toc-number":"3",children:"3 Common RVIZ Issues Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"unable-to-execute-catkin_make",className:"numbered-heading","data-number":"3.1","data-text":"Unable to Execute catkin_make","data-toc-number":"3.1",children:"3.1 Unable to Execute catkin_make"}),"\n",(0,s.jsx)(n.p,{children:"The system displays the following error message:"}),"\n",(0,s.jsx)("img",{src:(0,r.Ay)("/img/ROS1_4.1.png"),alt:"catkin_make_error",style:{display:"block",margin:"0 auto",width:"auto"}}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Check whether the ROS environment exists in the current setup. Refer to ",(0,s.jsx)(n.a,{href:"#environment-preparation",children:"Environment Preparation"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"unable-to-execute-source-develsetupbash",className:"numbered-heading","data-number":"3.2","data-text":"Unable to Execute source devel/setup.bash","data-toc-number":"3.2",children:"3.2 Unable to Execute source devel/setup.bash"}),"\n",(0,s.jsx)(n.p,{children:"The system displays the following error message:"}),"\n",(0,s.jsx)("img",{src:(0,r.Ay)("/img/ROS1_4.2.png"),alt:"source_setup_error",style:{display:"block",margin:"0 auto",width:"auto"}}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Root Cause: This issue is due to folder permission limitation."})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Run ",(0,s.jsx)(n.code,{children:"cd devel"})," to navigate into the folder."]}),"\n",(0,s.jsxs)(n.li,{children:["Execute the following command to add execution permissions to the file, then run ",(0,s.jsx)(n.code,{children:"source ./setup.bash"})," to resolve the issue:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"chmod +x setup.bash\n"})}),"\n",(0,s.jsx)(n.h3,{id:"rviz-window-opens-but-no-point-cloud-is-displayed",className:"numbered-heading","data-number":"3.3","data-text":"RVIZ Window Opens but No Point Cloud is Displayed","data-toc-number":"3.3",children:"3.3 RVIZ Window Opens but No Point Cloud is Displayed"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"First, check whether the lidar is correctly connected. Use tools such as Wireshark or PandarView to verify whether the lidar is transmitting data and displaying point cloud images."}),"\n",(0,s.jsxs)(n.li,{children:["Check whether the IP address and UDP port in the ",(0,s.jsx)(n.code,{children:"config.yaml"})," file match the information obtained from Wireshark. Refer to ",(0,s.jsxs)(n.a,{href:"#modify-the-configyaml-file",children:["Modify the ",(0,s.jsx)(n.code,{children:"config.yaml"})," File"]})," to resolve the issue."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453(e,n,i){i.d(n,{R:()=>r,x:()=>a});var t=i(6540);const s={},o=t.createContext(s);function r(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);