"use strict";(self.webpackChunkdocusaurus_wiki=self.webpackChunkdocusaurus_wiki||[]).push([[7364],{4104:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"how_to_guides/HTTP_api","title":"\u4f7f\u7528 HTTP API","description":"\u6982\u8ff0","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/how_to_guides/HTTP_api.md","sourceDirName":"how_to_guides","slug":"/how_to_guides/HTTP_api","permalink":"/dev/zh/docs/how_to_guides/HTTP_api","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"howToSidebar","previous":{"title":"\u914d\u7f6e\u4ee5\u592a\u7f51","permalink":"/dev/zh/docs/how_to_guides/network_config"},"next":{"title":"\u4f7f\u7528 TCP API","permalink":"/dev/zh/docs/how_to_guides/TCP_api"}}');var a=r(4848),d=r(8453),i=r(9030);const t={sidebar_position:2},l="\u4f7f\u7528 HTTP API",c={},o=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"\u5b9e\u4f8b\u4ecb\u7ecd",id:"\u5b9e\u4f8b\u4ecb\u7ecd",level:2},{value:"\u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570\uff08GET\uff09",id:"\u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570get",level:3},{value:"\u914d\u7f6e\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570\uff08SET\uff09",id:"\u914d\u7f6e\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570set",level:3}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"\u4f7f\u7528-http-api","data-toc-number":"\u4f7f\u7528",children:"\u4f7f\u7528 HTTP API"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6982\u8ff0",className:"numbered-heading","data-number":"1","data-text":"\u6982\u8ff0","data-toc-number":"1 \u6982\u8ff0",children:"1 \u6982\u8ff0"}),"\n",(0,a.jsx)(n.p,{children:"\u79be\u8d5b HTTP API \u63d0\u4f9b\u4e86\u4e00\u5957\u6807\u51c6\u7684 HTTP \u63a5\u53e3\uff0c\u5141\u8bb8\u5f00\u53d1\u8005\u901a\u8fc7\u7b80\u5355\u7684 HTTP \u6307\u4ee4\u8bf7\u6c42\u4e0e\u6fc0\u5149\u96f7\u8fbe\u8fdb\u884c\u4ea4\u4e92\u3002\u901a\u8fc7\u8fd9\u5957 API\uff0c\u53ef\u4ee5\u8f7b\u677e\u5b9e\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570\u83b7\u53d6\u548c\u529f\u80fd\u914d\u7f6e\u7b49\u64cd\u4f5c\u3002"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"\u6ce8\uff1aHTTP API \u53ea\u9002\u7528\u4e8e\u652f\u6301 HTTP \u670d\u52a1\u5668\u7684\u79be\u8d5b\u6fc0\u5149\u96f7\u8fbe\uff0c\u5305\u62ec Pandar \u7cfb\u5217/QT \u7cfb\u5217/XT \u7cfb\u5217\u7b49\u578b\u53f7\u3002"})}),"\n",(0,a.jsx)(n.h2,{id:"\u4f7f\u7528\u65b9\u6cd5",className:"numbered-heading","data-number":"2","data-text":"\u4f7f\u7528\u65b9\u6cd5","data-toc-number":"2 \u4f7f\u7528\u65b9\u6cd5",children:"2 \u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,a.jsx)(n.p,{children:"HTTP API \u6307\u4ee4\u7684\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u5c06\u6fc0\u5149\u96f7\u8fbe\u8fde\u63a5\u81f3\u7535\u8111\u4e3b\u673a\uff0c\u786e\u4fdd\u5176\u80fd\u591f\u4e0e\u4e3b\u673a\u6b63\u5e38\u5efa\u7acb\u901a\u4fe1\uff08\u5177\u4f53\u65b9\u6cd5\u8be6\u89c1",(0,a.jsx)(n.a,{href:"/dev/zh/docs/how_to_guides/network_config#%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95",children:"\u5982\u4f55\u914d\u7f6e\u4ee5\u592a\u7f51"}),"\uff09\uff1b"]}),"\n",(0,a.jsxs)(n.li,{children:["\u4ece\u4e3b\u673a\u672c\u5730\u5411\u6fc0\u5149\u96f7\u8fbe\u4fa7\u53d1\u9001 HTTP API \u6307\u4ee4\u3002\u8fd9\u91cc\u63a8\u8350\u91c7\u7528 Python \u811a\u672c\u65b9\u5f0f\uff0c\u76f8\u5e94\u7684",(0,a.jsx)(n.strong,{children:"\u793a\u4f8b\u4ee3\u7801"}),"\u53c2\u8003\u5982\u4e0b\uff1b"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\n# -*- coding: utf-8 -*-\n\nfrom urllib import request, parse\nimport requests\nimport json\nimport sys\nimport getopt\nimport IPy\nimport time\nimport os\n\n## Lidar IP address\n\nipaddr = \"192.168.1.201\"\n\n## HTTP API command\n\nlocal_url = 'http://' + ipaddr + '/pandar.cgi?action=get&object=lidar_config'\nf = None  # Initialize f\ntry:\n    f = request.urlopen(local_url, timeout=3.0)\n    print(\"Success!\")\n    data = f.read()\n    print(data)\n    print('Status:', f.status, f.reason)\n    json_data = data.decode('utf-8')\n    py_dict = json.loads(json_data)\n    py_body = py_dict.get('Body')\n\nexcept Exception as e:\n    print(f\"Error connecting to {local_url}: {e}\")\nfinally:\n    if f:\n        f.close()\n\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6709\u4e24\u4e2a\u53c2\u6570\u9700\u8981\u7279\u522b\u6ce8\u610f\uff1a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"ipaddr"}),"\uff1a\u4e3a\u6fc0\u5149\u96f7\u8fbe\u5bf9\u5e94\u7684 IP \u5730\u5740"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.em,{children:"local_url"}),"\uff1a\u4e3a HTTP API \u6307\u4ee4\u5bf9\u5e94\u7684\u5b57\u7b26\u4e32"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u5b9e\u9645\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u6839\u636e\u6fc0\u5149\u96f7\u8fbe\u7684\u53c2\u6570\u914d\u7f6e\u4e0e HTTP API \u5b9e\u73b0\u76ee\u7684\u5bf9\u8fd9\u4e24\u4e2a\u53c2\u6570\u8fdb\u884c\u4fee\u6539\u66f4\u65b0\u3002"}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"\u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u8fd4\u56de\u503c\u4fe1\u606f\uff0c\u786e\u8ba4 API \u6307\u4ee4\u53d1\u9001\u64cd\u4f5c\u662f\u5426\u6210\u529f\u3002"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u5b9e\u4f8b\u4ecb\u7ecd",className:"numbered-heading","data-number":"3","data-text":"\u5b9e\u4f8b\u4ecb\u7ecd","data-toc-number":"3 \u5b9e\u4f8b\u4ecb\u7ecd",children:"3 \u5b9e\u4f8b\u4ecb\u7ecd"}),"\n",(0,a.jsx)(n.p,{children:"\u672c\u6587\u9009\u53d6\u4e86\u4e00\u4e9b\u5e38\u7528\u6848\u4f8b\u4f5c\u4e3a HTTP API \u7684\u4f7f\u7528\u5b9e\u4f8b\u8bf4\u660e\u4ecb\u7ecd\u3002"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"\u6ce8\uff1a\u4ee5\u4e0b\u5b9e\u4f8b\u57fa\u4e8e XT32M2X \u8fd9\u4e00\u578b\u53f7\u5b9e\u73b0\uff0c\u5b9e\u9645\u5404\u4e2a\u578b\u53f7\u6fc0\u5149\u96f7\u8fbe\u7684 HTTP API \u6307\u4ee4\u53ef\u80fd\u6709\u6240\u4e0d\u540c\uff0c\u5177\u4f53\u5185\u5bb9\u8bf7\u53c2\u8003\u5bf9\u5e94\u578b\u53f7\u7684 HTTP API \u4f7f\u7528\u624b\u518c\u3002"})}),"\n",(0,a.jsx)(n.h3,{id:"\u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570get",className:"numbered-heading","data-number":"3.1","data-text":"\u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570\uff08GET\uff09","data-toc-number":"3.1 \u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570\uff08",children:"3.1 \u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570\uff08GET\uff09"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u6839\u636e\u6fc0\u5149\u96f7\u8fbe\u5f53\u524d\u7684 IP \u5730\u5740\u8bbe\u7f6e\u793a\u4f8b\u4ee3\u7801\u4e2d\u7684",(0,a.jsx)(n.em,{children:"ipaddr"}),"\u53c2\u6570\uff1b"]}),"\n",(0,a.jsxs)(n.li,{children:["\u5c06\u793a\u4f8b\u4ee3\u7801\u4e2d\u7684",(0,a.jsx)(n.em,{children:"local_url"}),"\u6309\u4ee5\u4e0b\u65b9\u5f0f\u4fee\u6539\u540e\uff08\u672c\u6b21\u4ee5\u83b7\u53d6\u6fc0\u5149\u96f7\u8fbe\u57fa\u672c\u4fe1\u606f\u4e3a\u4f8b\uff09\uff0c\u5728\u672c\u5730\u4e3b\u673a\u4e0a\u8fd0\u884c\u6b64 Python \u811a\u672c\uff1a"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"\n## HTTP API command\n\nlocal_url = 'http://' + ipaddr + '/pandar.cgi?action=get&object=device_info'\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"\u4ece\u8fd0\u884c\u7ed3\u679c\u4e2d\u53ef\u4ee5\u83b7\u5f97\u6fc0\u5149\u96f7\u8fbe SN\u3001MAC \u5730\u5740\u3001\u8f6f\u56fa\u4ef6\u7248\u672c\u53f7\u7b49\u8bbe\u5907\u57fa\u672c\u4fe1\u606f\u3002\u5177\u4f53\u7ed3\u679c\u53c2\u8003\u5982\u4e0b\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'Success!\nb\'{"Head":{"ErrorCode":"0","Message": "Success"},"Body":{"SN": "XT3ACD5F983ACC56","Mac": "EC:9F:00:01:58:3D", "SW Ver: "2.1.7","HW Ver":"1.0.0","FW Ver":"2.0.11","Model":"XT32M2X","Angleoffset":"9129", "Calibsize":"0","FPGA_Ver":"","LidarCalibsize":"384","Up_Fpga_Ver":" 2.1.4","Udp_Seq":"1","1","ProdDate":"2023-06-08", "ProdName":"XT32M2X-B01","LidarDataformat":"1","Trigger_Method":"0","LaserNum":"32","Firing_Method":"",""AccAnglePhase":"0","AccAn\nglePeak": "0","AccAngleEnable":"0","0","MotorType":"0", "LargeCodeRange":"1","Codewheel_cal":"1","MotorStartAngle_en":"0", "MotorstartAngle_val":"0","UpFpgaconfigsha":"f80c28c5", "UpFpgacorrectsha":"ef480d97","PN":""XT32M2X"}}\'\nStatus:200 OK\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u914d\u7f6e\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570set",className:"numbered-heading","data-number":"3.2","data-text":"\u914d\u7f6e\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570\uff08SET\uff09","data-toc-number":"3.2 \u914d\u7f6e\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570\uff08",children:"3.2 \u914d\u7f6e\u6fc0\u5149\u96f7\u8fbe\u53c2\u6570\uff08SET\uff09"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u6839\u636e\u6fc0\u5149\u96f7\u8fbe\u5f53\u524d\u7684 IP \u5730\u5740\u8bbe\u7f6e\u793a\u4f8b\u4ee3\u7801\u4e2d\u7684\u2018",(0,a.jsx)(n.em,{children:"ipaddr"}),"\u2018\u53c2\u6570\uff1b"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["\u5c06\u793a\u4f8b\u4ee3\u7801\u4e2d\u7684\u2018",(0,a.jsx)(n.em,{children:"local_url"}),"\u2019\u6309\u4ee5\u4e0b\u65b9\u5f0f\u4fee\u6539\u540e\uff08\u672c\u6b21\u4ee5\u914d\u7f6e\u6fc0\u5149\u96f7\u8fbe",(0,a.jsx)(n.strong,{children:"\u53cc\u56de\u6ce2"}),"\u6a21\u5f0f\u4e3a\u4f8b\uff09\uff0c\u5728\u672c\u5730\u4e3b\u673a\u4e0a\u8fd0\u884c\u6b64 Python \u811a\u672c\uff1a"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"\n## HTTP API command\n\nlocal_url = 'http://' + ipaddr + '/pandar.cgi?action=set&object=lidar_data&key=lidar_mode&value=2'\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"\u8fd0\u884c\u811a\u672c\u540e\u7ec8\u7aef\u6253\u5370\u5982\u4e0b\u6240\u793a\u4fe1\u606f\uff0c\u5373\u4ee3\u8868\u8bbe\u7f6e\u6210\u529f\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'Success!\nb\'{"Head":{"ErrorCode":"0","Message": "Success"}}\'\nStatus:200 OK\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"4",children:["\n",(0,a.jsx)(n.li,{children:"\u7f51\u9875\u6d4f\u89c8\u5668\u8f93\u5165\u6fc0\u5149\u96f7\u8fbe IP \u5730\u5740\uff0c\u786e\u8ba4\u5f53\u524d\u6fc0\u5149\u96f7\u8fbe\u63a7\u5236\u9875\u9762\u663e\u793a\u7684\u56de\u6ce2\u6a21\u5f0f\u914d\u7f6e\u5df2\u540c\u6b65\u751f\u6548\uff1a"}),"\n"]}),"\n",(0,a.jsx)("img",{src:(0,i.Ay)("/img/http_dualreturn.png"),alt:"http_dualreturn",style:{display:"block",margin:"0 auto",width:"auto"}})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);