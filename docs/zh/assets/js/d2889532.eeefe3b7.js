"use strict";(self.webpackChunkdocusaurus_wiki=self.webpackChunkdocusaurus_wiki||[]).push([[5228],{9917:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"how_to_guides/Angle-Correction-File","title":"\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6","description":"\u6982\u8ff0","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/how_to_guides/Angle-Correction-File.md","sourceDirName":"how_to_guides","slug":"/how_to_guides/Angle-Correction-File","permalink":"/dev/zh/docs/how_to_guides/Angle-Correction-File","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"howToSidebar","previous":{"title":"\u540c\u6b65\u6c34\u5e73\u89d2\u5ea6","permalink":"/dev/zh/docs/how_to_guides/sync_angle"},"next":{"title":"\u5e38\u89c1\u95ee\u9898\u6392\u67e5","permalink":"/dev/zh/docs/how_to_guides/troubleshooting_guide"}}');var s=t(4848),a=t(8453),i=t(9030);const d={sidebar_position:6},l="\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6",o={},c=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"\u4f7f\u7528 PandarView 2 \u5ba2\u6237\u7aef",id:"\u4f7f\u7528-pandarview-2-\u5ba2\u6237\u7aef",level:3},{value:"\u4f7f\u7528 API \u6307\u4ee4",id:"\u4f7f\u7528-api-\u6307\u4ee4",level:3},{value:"\u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f",id:"\u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f",level:4},{value:"CSV \u683c\u5f0f",id:"csv-\u683c\u5f0f",level:5},{value:"DAT \u683c\u5f0f",id:"dat-\u683c\u5f0f",level:5},{value:"\u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f",id:"\u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f",level:4},{value:"\u4e32\u53e3\u8fde\u63a5",id:"\u4e32\u53e3\u8fde\u63a5",level:5},{value:"\u5b9e\u4f8b\u4ecb\u7ecd",id:"\u5b9e\u4f8b\u4ecb\u7ecd",level:2},{value:"\u4f7f\u7528 PandarView 2 \u5ba2\u6237\u7aef\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6",id:"\u4f7f\u7528-pandarview-2-\u5ba2\u6237\u7aef\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6",level:3},{value:"\u4f7f\u7528 API \u6307\u4ee4\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6",id:"\u4f7f\u7528-api-\u6307\u4ee4\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6",level:3},{value:"\u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f",id:"\u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f-1",level:4},{value:"<a></a>CSV \u683c\u5f0f",id:"csv-\u683c\u5f0f-1",level:5},{value:"<a></a>DAT \u683c\u5f0f",id:"dat-\u683c\u5f0f-1",level:5},{value:"\u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f",id:"\u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f-1",level:4},{value:"<a></a>\u4e32\u53e3\u8fde\u63a5",id:"\u4e32\u53e3\u8fde\u63a5-1",level:5}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6","data-toc-number":"\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6",children:"\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6982\u8ff0",className:"numbered-heading","data-number":"1","data-text":"\u6982\u8ff0","data-toc-number":"1 \u6982\u8ff0",children:"1 \u6982\u8ff0"}),"\n",(0,s.jsx)(n.p,{children:"\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6\u662f\u7cfb\u7edf\u6807\u5b9a\u3001\u70b9\u4e91\u89e3\u7b97\u548c\u7a7a\u95f4\u5b9a\u4f4d\u7684\u65b9\u5411\u57fa\u51c6\u3002\u4e3a\u786e\u4fdd\u6d4b\u91cf\u7cbe\u5ea6\uff0c\u79be\u8d5b\u5bf9\u6bcf\u53f0\u6fc0\u5149\u96f7\u8fbe\u51fa\u5382\u65f6\u8fdb\u884c\u72ec\u7acb\u89d2\u5ea6\u6807\u5b9a\uff0c\u6bcf\u53f0\u7684\u6807\u5b9a\u7ed3\u679c\u4e0d\u540c\uff0c\u8be5\u552f\u4e00\u4fee\u6b63\u6570\u636e\u8bb0\u5f55\u4e3a\u201c\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6\u201d\u5e76\u968f\u6fc0\u5149\u96f7\u8fbe\u63d0\u4f9b\u3002"}),"\n",(0,s.jsxs)(n.p,{children:["\u6fc0\u5149\u96f7\u8fbe\u8fde\u63a5\u65b9\u5f0f\u5206\u4e3a",(0,s.jsx)(n.strong,{children:"\u4ee5\u592a\u7f51\u8fde\u63a5"}),"\u548c",(0,s.jsx)(n.strong,{children:"\u4e32\u53e3\u8fde\u63a5"}),"\uff1b\u89d2\u5ea6\u6587\u4ef6\u683c\u5f0f\u5305\u62ec",(0,s.jsx)(n.strong,{children:"CSV \u683c\u5f0f"}),"\u548c",(0,s.jsx)(n.strong,{children:"DAT \u683c\u5f0f"}),"\uff1b\u5177\u4f53\u578b\u53f7\u53c2\u89c1\u8868\u683c\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"\u6fc0\u5149\u96f7\u8fbe\u578b\u53f7\u4e0e\u8fde\u63a5\u65b9\u5f0f\u5bf9\u5e94\u5173\u7cfb\u8868\uff1a"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"\u8fde\u63a5\u65b9\u5f0f"})}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"\u4ee5\u592a\u7f51\u8fde\u63a5"})}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"\u4e32\u53e3\u8fde\u63a5"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"\u4ea7\u54c1\u7cfb\u5217"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"Pandar\u3001OT\u3001QT\u3001XT\u3001AT"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"JT"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"\u9002\u7528\u4ea7\u54c1"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"Pandar40P\u3001Pandar64\u3001Pandar128E3X\u3001OT128\u3001PandarQT\u3001QT128C2X\u3001XT32\u3001XT16\u3001XT32M2X\u3001AT128E2X\u3001AT128P\u3001ATX"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"JT16"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"\u6fc0\u5149\u96f7\u8fbe\u578b\u53f7\u4e0e\u6587\u4ef6\u683c\u5f0f\u5bf9\u5e94\u5173\u7cfb\u8868\uff1a"})})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"\u6587\u4ef6\u683c\u5f0f"})}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"CSV \u683c\u5f0f"})}),(0,s.jsx)(n.th,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"DAT \u683c\u5f0f"})})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"\u4ea7\u54c1\u7cfb\u5217"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"Pandar\u3001OT\u3001QT\u3001XT"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"AT\u3001JT"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"center"},children:(0,s.jsx)(n.strong,{children:"\u9002\u7528\u4ea7\u54c1"})}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"Pandar40P\u3001Pandar64\u3001Pandar128E3X\u3001OT128\u3001PandarQT\u3001QT128C2X\u3001XT32\u3001XT16\u3001XT32M2X"}),(0,s.jsx)(n.td,{style:{textAlign:"center"},children:"AT128E2X\u3001AT128P\u3001ATX\u3001JT16"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"\u4f7f\u7528\u65b9\u6cd5",className:"numbered-heading","data-number":"2","data-text":"\u4f7f\u7528\u65b9\u6cd5","data-toc-number":"2 \u4f7f\u7528\u65b9\u6cd5",children:"2 \u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528-pandarview-2-\u5ba2\u6237\u7aef",className:"numbered-heading","data-number":"2.1","data-text":"\u4f7f\u7528 PandarView 2 \u5ba2\u6237\u7aef","data-toc-number":"2.1 \u4f7f\u7528",children:"2.1 \u4f7f\u7528 PandarView 2 \u5ba2\u6237\u7aef"}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528-api-\u6307\u4ee4",className:"numbered-heading","data-number":"2.2","data-text":"\u4f7f\u7528 API \u6307\u4ee4","data-toc-number":"2.2 \u4f7f\u7528",children:"2.2 \u4f7f\u7528 API \u6307\u4ee4"}),"\n",(0,s.jsx)(n.h4,{id:"\u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f",className:"numbered-heading","data-number":"2.2.1","data-text":"\u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f","data-toc-number":"2.2.1 \u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f",children:"2.2.1 \u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f"}),"\n",(0,s.jsx)(n.h5,{id:"csv-\u683c\u5f0f",children:(0,s.jsx)(n.a,{href:"#csv-format",children:"CSV \u683c\u5f0f"})}),"\n",(0,s.jsx)(n.h5,{id:"dat-\u683c\u5f0f",children:(0,s.jsx)(n.a,{href:"#dat-format",children:"DAT \u683c\u5f0f"})}),"\n",(0,s.jsx)(n.h4,{id:"\u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f",className:"numbered-heading","data-number":"2.2.2","data-text":"\u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f","data-toc-number":"2.2.2 \u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f",children:"2.2.2 \u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f"}),"\n",(0,s.jsx)(n.h5,{id:"\u4e32\u53e3\u8fde\u63a5",children:(0,s.jsx)(n.a,{href:"#serial-connection",children:"\u4e32\u53e3\u8fde\u63a5"})}),"\n",(0,s.jsx)(n.p,{children:"\u672c\u6587\u5c06\u5206\u522b\u4ecb\u7ecd\u4e24\u79cd\u65b9\u6cd5\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6\u7684\u76f8\u5e94\u5b9e\u4f8b\uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u5176\u4e2d\u4e00\u79cd\u6216\u591a\u79cd\u8fdb\u884c\u4f7f\u7528\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u5b9e\u4f8b\u4ecb\u7ecd",className:"numbered-heading","data-number":"3","data-text":"\u5b9e\u4f8b\u4ecb\u7ecd","data-toc-number":"3 \u5b9e\u4f8b\u4ecb\u7ecd",children:"3 \u5b9e\u4f8b\u4ecb\u7ecd"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"\u6ce8\uff1a\u4ee5\u4e0b\u5b9e\u4f8b\u57fa\u4e8e XT32 \u3001AT128P \u548c JT16 \u7684\u7528\u6237\u53ca\u6307\u4ee4\u624b\u518c\u5b9e\u73b0\uff0c\u5b9e\u9645\u5404\u4e2a\u578b\u53f7\u6fc0\u5149\u96f7\u8fbe\u7684\u914d\u7f6e\u53ef\u80fd\u6709\u6240\u4e0d\u540c\uff0c\u5177\u4f53\u5185\u5bb9\u8bf7\u53c2\u8003\u5bf9\u5e94\u578b\u53f7\u7684\u7528\u6237\u624b\u518c\u3002"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528-pandarview-2-\u5ba2\u6237\u7aef\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6",className:"numbered-heading","data-number":"3.1","data-text":"\u4f7f\u7528 PandarView 2 \u5ba2\u6237\u7aef\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6","data-toc-number":"3.1 \u4f7f\u7528",children:"3.1 \u4f7f\u7528 PandarView 2 \u5ba2\u6237\u7aef\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6"}),"\n",(0,s.jsxs)(n.p,{children:["1. \u8bbf\u95ee\u79be\u8d5b",(0,s.jsx)(n.a,{href:"https://www.hesaitech.com/product_downloads/pandarview-2/",children:"\u5b98\u7f51"})," \u4e0b\u8f7d\u5e76\u5b89\u88c5 PandarView 2 \u5ba2\u6237\u7aef\uff1b"]}),"\n",(0,s.jsxs)(n.p,{children:["2. \u5c06\u6fc0\u5149\u96f7\u8fbe\u8fde\u63a5\u81f3\u7535\u8111\u4e3b\u673a\uff0c\u786e\u4fdd\u5176\u80fd\u591f\u4e0e\u4e3b\u673a\u6b63\u5e38\u5efa\u7acb\u901a\u4fe1\uff1b\uff08\u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u6cd5\u8be6\u89c1",(0,s.jsx)(n.a,{href:"/dev/zh/docs/how_to_guides/network_config",children:"\u5982\u4f55\u914d\u7f6e\u4ee5\u592a\u7f51"}),"\uff1b\u4e32\u53e3\u8fde\u63a5\u65b9\u6cd5\u8be6\u89c1\u76f8\u5173\u6fc0\u5149\u96f7\u8fbe\u7528\u6237\u624b\u518c\uff09"]}),"\n",(0,s.jsxs)(n.p,{children:["3. \u6253\u5f00 PandarView 2 \u5ba2\u6237\u7aef\uff0c\u70b9\u51fb\u5de6\u4e0a\u89d2\u5de5\u5177\u680f [ Listen for Data] \u6309\u94ae \uff0c\u6fc0\u5149\u96f7\u8fbe\u8fde\u63a5\u65b9\u5f0f\u5206\u4e3a",(0,s.jsx)(n.strong,{children:"\u4ee5\u592a\u7f51\u8fde\u63a5"}),"\u548c",(0,s.jsx)(n.strong,{children:"\u4e32\u53e3\u8fde\u63a5"}),"\uff0c\u4e24\u79cd\u65b9\u5f0f\u914d\u7f6e\u65b9\u5f0f\u7565\u6709\u4e0d\u540c\uff0c\u8bf7\u6309\u7167\u6fc0\u5149\u96f7\u8fbe\u5b9e\u9645\u53c2\u6570\u5bf9\u5e94\u586b\u5199\u3002"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"\u6ce8\uff1a\u4e32\u53e3\u8fde\u63a5\u65f6 PandarView 2 \u7248\u672c\u987b\u5927\u4e8e 2.1.7\uff0c\u5f39\u51fa\u9875\u9009\u62e9 Serial Port \u9009\u9879\u5e76\u586b\u5199 RS485 \u4e32\u53e3\u5730\u5740\u4e0e\u6ce2\u7279\u7387\uff0c\u53c2\u8003\u578b\u53f7\uff1aJT16"})})}),"\n",(0,s.jsx)("img",{src:(0,i.Ay)("/img/pandarview_connect.png"),alt:"\u8fde\u63a5\u914d\u7f6e\u754c\u9762",style:{display:"block",margin:"0 auto",width:"auto"}}),"\n",(0,s.jsx)(n.p,{children:"\u5b8c\u6210\u4e0a\u8ff0\u53c2\u6570\u914d\u7f6e\u540e\u70b9\u51fb[ OK ] \u786e\u8ba4\uff1b"}),"\n",(0,s.jsx)(n.p,{children:"4. \u70b9\u51fb\u5de5\u5177\u680f [ Correction ] \u6309\u94ae\uff0c\u8fdb\u5165 Angle Correction \u680f\u5e76\u70b9\u51fb Export\uff0c\u5f39\u51fa\u7684\u7a97\u53e3\u4e2d\u8f93\u5165\u6587\u4ef6\u540d\u5e76\u9009\u62e9\u4fdd\u5b58\u4f4d\u7f6e\uff0c\u7136\u540e\u70b9\u51fb\u786e\u8ba4\u4ee5\u5b8c\u6210\u5bfc\u51fa\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:(0,s.jsx)(n.strong,{children:"\u6ce8\uff1aUbuntu \u7cfb\u7edf\u4e0b\u4fdd\u5b58\u6587\u4ef6\u65f6\u5fc5\u987b\u6dfb\u52a0\u6b63\u786e\u7684\u6587\u4ef6\u540e\u7f00 (.csv/.dat)"})})}),"\n",(0,s.jsx)("img",{src:(0,i.Ay)("/img/pandarview_export.png"),alt:"\u6587\u4ef6\u5bfc\u51fa\u754c\u9762",style:{display:"block",margin:"0 auto",width:"auto"}}),"\n",(0,s.jsx)(n.h3,{id:"\u4f7f\u7528-api-\u6307\u4ee4\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6",className:"numbered-heading","data-number":"3.2","data-text":"\u4f7f\u7528 API \u6307\u4ee4\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6","data-toc-number":"3.2 \u4f7f\u7528",children:"3.2 \u4f7f\u7528 API \u6307\u4ee4\u83b7\u53d6\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6"}),"\n",(0,s.jsx)(n.h4,{id:"\u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f-1",className:"numbered-heading","data-number":"3.2.1","data-text":"\u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f","data-toc-number":"3.2.1 \u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f",children:"3.2.1 \u4ee5\u592a\u7f51\u8fde\u63a5\u65b9\u5f0f"}),"\n",(0,s.jsxs)(n.h5,{id:"csv-\u683c\u5f0f-1",children:[(0,s.jsx)("a",{id:"csv-format"}),"CSV \u683c\u5f0f"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"\u53c2\u8003\u578b\u53f7\uff1aXT32"})}),"\n",(0,s.jsx)(n.p,{children:"1. \u672c\u673a\u4e0e\u8fde\u63a5\u6fc0\u5149\u96f7\u8fbe\u540e\uff0c\u4f7f\u7528 IDE \u6253\u5f00\u4e0b\u65b9\u811a\u672c\uff1b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import socket, ssl, pprint, time\nimport random\nimport struct\n\ndefault_host = "192.168.1.201" # Change this to your Lidar IP\ndefault_port = 9347 # Change this to your Lidar PTC Port\n\nclass PTC:\n    def __init__(self, host=default_host, port=default_port):\n        self.s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n        lp = random.randint(10000, 30000)\n        self.s.bind((\'0.0.0.0\', lp))\n        self.s.settimeout(30)\n        self.s.connect((host, port))\n\n    def closeSocket(self):\n        self.s.shutdown(1)\n        # self.s.close()\n\n    def ByteToHex(self, h):\n        return \'\'.join(["%02x" % x for x in h]).strip()\n\n    def read_bytes(self, payload_size):\n        chunks = []\n        bytes_received = 0\n        while bytes_received < payload_size:\n            chunk = self.s.recv(payload_size - bytes_received)\n            if chunk == b"":\n                raise RuntimeError("Socket has been unexpectedly closed")\n            chunks.append(chunk)\n            bytes_received = bytes_received + len(chunk)\n\n        return b"".join(chunks)\n\n    def sender(self, cmd_code, payload):\n        """\n        :param cmd_code:\n        :param payload: payload should input like \'015d010207\'\n        :return:\n        """\n        if cmd_code in [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, \'0\', \'1\', \'2\', \'3\', \'4\', \'5\', \'6\', \'7\', \'8\', \'9\', \'a\', \'b\', \'c\', \'d\', \'e\',\n                        \'f\']:\n            cmd_code = "0" + str(cmd_code)\n        print("payload :")\n        print(payload)\n        if not payload or payload.upper() == "NONE":\n            payload_len = 0\n            p = \'4774\' + str(cmd_code) + "00" + struct.pack(\'>L\', payload_len).hex()\n        else:\n            payload_len = len(bytes.fromhex(payload))\n            p = \'4774\' + str(cmd_code) + "00" + struct.pack(\'>L\', payload_len).hex() + payload\n        data = bytes.fromhex(p)\n        self.s.send(data)\n        response = self.s.recv(8)\n        print("response: ")\n        print(response)\n        r_cmd = bytes.hex(response[2:3])\n        r_returnCode = bytes.hex(response[3:4])\n        if bytes.hex(response[4:8]) == "\\x00\\x00\\x00\\x00":\n            r_length = 0\n            response_payload = ""\n        else:\n            r_length = int(bytes.hex(response[4:8]), 16)\n            response_payload = self.read_bytes(r_length)\n        print("command is: %s, get return code: %s, return length: %s, \\nreturn string:\\n%s" % (\n            r_cmd, r_returnCode, r_length, response_payload))\n        final_response = {\n            "response_command": r_cmd,\n            "response_return_code": r_returnCode,\n            "response_payload_length": r_length,\n            "response_payload": response_payload\n        }\n        return final_response\n\nif __name__ == "__main__":\n    ss = PTC()\n    print(ss.sender(\'05\', None)) # Example command to \'Get Current Fault Log\', change the command code and payload as needed\n\n    # save it as a CSV file\n    response = ss.sender(\'05\', None)\n    correction_data = response.get("response_payload", b"")\n    with open("angle_correction.csv", "wb") as f:\n        f.write(correction_data)\n    print("The data has been saved as angle_correction.csv.")\n\n    ss.closeSocket()\n'})}),"\n",(0,s.jsx)(n.p,{children:"2. \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914d\u7f6e\u672c\u673a Python \u73af\u5883\uff1b\u5728\u811a\u672c\u4e2d\u627e\u5230\u7b2c 5\u30016 \u884c\u4ee3\u7801\uff1a"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:'default_host = "192.168.1.201"'})," \u3001",(0,s.jsx)(n.code,{children:"default_port = 9347"}),"\u2192 \u5c06 ",(0,s.jsx)(n.code,{children:'"192.168.1.201"'})," \u548c ",(0,s.jsx)(n.code,{children:"9347"})," \u4fee\u6539\u4e3a\u6fc0\u5149\u96f7\u8fbe\u7684\u5b9e\u9645 IP \u5730\u5740\u548c\u7aef\u53e3\u53f7\uff0c\u7136\u540e\u8fd0\u884c\u4ee3\u7801\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd0\u884c\u6210\u529f\u540e\uff0c\u5c06\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u751f\u6210\u540d\u4e3a ",(0,s.jsx)(n.code,{children:"angle_correction.csv"})," \u7684\u89d2\u5ea6\u6587\u4ef6\u3002"]}),"\n",(0,s.jsxs)(n.h5,{id:"dat-\u683c\u5f0f-1",children:[(0,s.jsx)("a",{id:"dat-format"}),"DAT \u683c\u5f0f"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"\u53c2\u8003\u578b\u53f7\uff1aAT128P"})}),"\n",(0,s.jsx)(n.p,{children:"1. \u672c\u673a\u4e0e\u8fde\u63a5\u6fc0\u5149\u96f7\u8fbe\u540e\uff0c\u4f7f\u7528 IDE \u6253\u5f00\u4e0b\u65b9\u811a\u672c\uff1b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from socket import *\n\nsock = socket(AF_INET,SOCK_STREAM)\n\nmessage = bytearray()\nmessage1 = bytearray()\nSN = bytearray()\n\n# header\n\nmessage.append(0x47)\nmessage.append(0x74)\n\n# command\n\n##################################################################\nmessage.append(0x05) #0x05 for Get Angle Correction File\n##################################################################\n\n# return code\n\nmessage.append(0x00)\n\n# Tail\n\nmessage.append(0x00)\nmessage.append(0x00)\nmessage.append(0x00)\nmessage.append(0x00) #0x01 payload data length for the command\nmessage.append(0x00) #payload data value, 0x01 means PTP STATUS\n\nsock.connect((\"192.168.1.201\",9347))#the ip of device and Port you need to call(fixed)\n\nsock.send(message)\nresponse=sock.recv(8)\nr_cmd = int.from_bytes(response[2:3], 'big')\nr_returnCode = int.from_bytes(response[3:4], 'big')\nr_length = int.from_bytes(response[4:8], 'big')\nresponse_payload=b''\nwhile len(response_payload) < r_length:\n    response_payload += sock.recv(r_length)\n\nprint(response_payload)\nwith open(\"corrections.dat\",\"wb\") as f:\n    f.write(response_payload)\nf.close()\n"})}),"\n",(0,s.jsxs)(n.p,{children:["2. \u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914d\u7f6e\u672c\u673a Python \u73af\u5883\uff0c\u5728\u4ee3\u7801\u4e2d\u627e\u5230\u7b2c 24 \u884c\u4ee3\u7801\uff1a ",(0,s.jsx)(n.code,{children:'sock.connect(("192.168.1.201",9347))'})," \u2192 \u5c06 ",(0,s.jsx)(n.code,{children:'"192.168.1.201"'})," \u548c ",(0,s.jsx)(n.code,{children:"9347"})," \u4fee\u6539\u4e3a\u6fc0\u5149\u96f7\u8fbe\u7684\u5b9e\u9645 IP \u5730\u5740\u548c\u7aef\u53e3\u53f7\uff0c\u7136\u540e\u8fd0\u884c\u4ee3\u7801\u3002\uff1b"]}),"\n",(0,s.jsxs)(n.p,{children:["\u8fd0\u884c\u6210\u529f\u540e\uff0c\u5c06\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u751f\u6210\u540d\u4e3a ",(0,s.jsx)(n.code,{children:"corrections.dat"})," \u7684\u89d2\u5ea6\u6587\u4ef6\u3002"]}),"\n",(0,s.jsx)(n.h4,{id:"\u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f-1",className:"numbered-heading","data-number":"3.2.2","data-text":"\u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f","data-toc-number":"3.2.2 \u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f",children:"3.2.2 \u4e32\u53e3\u8fde\u63a5\u65b9\u5f0f"}),"\n",(0,s.jsxs)(n.h5,{id:"\u4e32\u53e3\u8fde\u63a5-1",children:[(0,s.jsx)("a",{id:"serial-connection"}),"\u4e32\u53e3\u8fde\u63a5"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"\u53c2\u8003\u578b\u53f7\uff1aJT16"})}),"\n",(0,s.jsx)(n.p,{children:"1. \u6839\u636e\u6fc0\u5149\u96f7\u8fbe\u7528\u6237\u624b\u518c\u5b8c\u6210\u4e0e\u672c\u673a\u8fde\u63a5\u540e\uff0c\u4f7f\u7528 IDE \u6253\u5f00\u4e0b\u65b9\u811a\u672c\uff1b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import struct\nimport csv\nimport serial\nimport time\nfrom datetime import datetime\nfrom threading import Thread, Event\n\n\ndef parse_angle_data(valid_data):\n    # Ensure valid_data length is 68 bytes\n    if len(valid_data) != 68:\n        raise ValueError("Valid data length must be 68 bytes")\n\n    # Initialize lists to store angle values\n    azimuth_values = []\n    elevation_values = []\n\n    # Parse Azimuth data (first 32 bytes)\n    for i in range(16):\n        azimuth_bytes = valid_data[i * 2:(i + 1) * 2]\n        azimuth_value = struct.unpack(\'<h\', azimuth_bytes)[0] * 0.01  # Little-endian, short type, unit 0.01\xb0\n        azimuth_values.append(azimuth_value)\n\n    # Parse Elevation data (next 32 bytes)\n    for i in range(16):\n        elevation_bytes = valid_data[32 + i * 2:32 + (i + 1) * 2]\n        elevation_value = struct.unpack(\'<h\', elevation_bytes)[0] * 0.01  # Little-endian, short type, unit 0.01\xb0\n        elevation_values.append(elevation_value)\n\n    return azimuth_values, elevation_values\n\n\ndef save_to_csv(elevation_values, azimuth_values, output_file):\n    with open(output_file, \'w\', newline=\'\') as csvfile:\n        fieldnames = [\'Channel\', \'Elevation (\xb0)\', \'Azimuth (\xb0)\']\n        writer = csv.DictWriter(csvfile, fieldnames=fieldnames)\n\n        writer.writeheader()\n        for i in range(16):\n            writer.writerow({\n                \'Channel\': i + 1,\n                \'Elevation (\xb0)\': elevation_values[i],\n                \'Azimuth (\xb0)\': azimuth_values[i]\n            })\n\n\ndef get_angle_correction(send_port: str, receive_port: str, baudrate_UART: int, baudrate_485: int):\n    # Command configuration\n    COMMAND = bytes([\n        0x24, 0x4C, 0x44, 0x43, 0x4D, 0x44, 0x2C, 0x03,\n\n        0x02, 0x07, 0x00, 0x95, 0xB3, 0x2C, 0x0A,\n\n        0xD3, 0x86, 0x1F, 0xA3, 0xEE, 0xFF\n    ])\n\n    # Response pattern configuration\n    START_MARKER = bytes([0x24, 0x4C, 0x44, 0x41, 0x43, 0x4B,\n                          0x2C, 0x48, 0x02, 0x07, 0x00])\n    DATA_START_OFFSET = 12  # Start position of valid data\n    DATA_LENGTH = 68  # Length of data to extract\n    ERROR_CODE_OFFSET = 80  # Position of error code\n    TOTAL_TIMEOUT = 8  # Total timeout in seconds\n    PRE_READ_TIME = 0.5  # Pre-read time in seconds\n\n    class AsyncReader:\n        def __init__(self, ser):\n            self.ser = ser\n            self.buffer = bytearray()\n            self.stop_event = Event()\n            self.thread = None\n\n        def start(self):\n            self.thread = Thread(target=self._read_loop)\n            self.thread.start()\n\n        def _read_loop(self):\n            while not self.stop_event.is_set():\n                if self.ser.in_waiting > 0:\n                    chunk = self.ser.read(self.ser.in_waiting)\n                    self.buffer.extend(chunk)\n\n        def stop(self):\n            self.stop_event.set()\n            if self.thread.is_alive():\n                self.thread.join(timeout=1)\n\n        def get_buffer(self):\n            return bytes(self.buffer)\n\n    try:\n        # Generate timestamped filenames\n        timestamp = datetime.now().strftime(\'%Y%m%d_%H%M%S\')\n        output_file = f"JT16_angle_correction_{timestamp}.dat"\n        log_file = f"JT16_angle_log_{timestamp}.txt"\n        csv_file = f"JT16_angle_correction_{timestamp}.csv"\n        # Open receiving port first\n        with serial.Serial(receive_port, baudrate_485, timeout=0) as ser_recv:  # Non-blocking mode\n            reader = AsyncReader(ser_recv)\n            reader.start()\n\n            # Start receiving data in advance\n            print(f"[{timestamp}] Starting pre-reception...")\n            time.sleep(PRE_READ_TIME)  # Pre-receive for 500ms\n            # Send command\n            with serial.Serial(send_port, baudrate_UART, timeout=1) as ser_send:\n                print(f"[{timestamp}] Sending command to {send_port}...")\n                ser_send.write(COMMAND)\n                ser_send.flush()\n\n            # Main processing loop\n            start_time = time.time()\n            found = False\n\n            with open(log_file, \'w\') as log:\n                log.write(f"Angle Correction Process Log - {timestamp}\\n")\n                log.write("=" * 50 + "\\n")\n\n                while (time.time() - start_time) < TOTAL_TIMEOUT:\n                    # Get current buffer\n                    current_buffer = reader.get_buffer()\n\n                    # Find start marker\n                    pos = current_buffer.find(START_MARKER)\n                    if pos != -1:\n                        # Calculate required end position\n                        required_end = pos + DATA_START_OFFSET + DATA_LENGTH + 1\n\n                        if len(current_buffer) >= required_end:\n                            # Extract response segment\n                            response = current_buffer[pos:required_end]\n\n                            # Verify data integrity\n                            if (response[11] == 0x44 and\n                                    response[ERROR_CODE_OFFSET] == 0x00):\n                                # Extract valid data\n                                valid_data = response[DATA_START_OFFSET:DATA_START_OFFSET + DATA_LENGTH]\n\n                                # Save as DAT file\n                                with open(output_file, \'wb\') as f:\n                                    f.write(valid_data)\n\n                                # # Parse angle data\n                                # azimuth_values, elevation_values = parse_angle_data(valid_data)\n                                #\n                                # # Save as CSV file\n                                # save_to_csv(elevation_values, azimuth_values, csv_file)\n\n                                log.write(f"Data saved to {output_file}\\n")\n                                print(f"Correction file saved successfully: {output_file}")\n                                print(f"CSV file saved successfully: {csv_file}")\n                                found = True\n                                break\n\n                            # Clean up processed buffer\n                            reader.buffer = reader.buffer[required_end:]\n\n                    time.sleep(0.01)  # Reduce CPU usage\n\n                reader.stop()\n\n                if not found:\n                    error_msg = "No valid response received" if len(current_buffer) == 0 \\\n                        else f"Received {len(current_buffer)} bytes but no valid data found"\n                    log.write(f"Error: {error_msg}\\n")\n                    raise TimeoutError(error_msg)\n\n    except Exception as e:\n        error_msg = f"{type(e).__name__}: {str(e)}"\n        print(f"An error occurred: {error_msg}")\n        with open(log_file, \'a\') as log:\n            log.write(f"Error: {error_msg}\\n")\n        raise\n\n\nif __name__ == "__main__":\n    # Enter UART port, RS485 port, UART baud rate, RS485 baud rate respectively\n    # Example: Windows: COM*; Ubuntu: /dev/ttyUSB*\n    get_angle_correction("COM4", "COM5", 9600, 3000000)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["2.\u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u914d\u7f6e\u672c\u673a Python \u73af\u5883\uff0c\u5e76\u4fee\u6539\u811a\u672c\u6700\u540e\u4e00\u884c\u4e2d\u7684 ",(0,s.jsx)(n.strong,{children:"RS485"})," \u548c ",(0,s.jsx)(n.strong,{children:"RS232"})," \u7aef\u53e3\u53f7\u53ca\u6ce2\u7279\u7387\u3002\u6ce8\u610f\u540c\u4e00\u4e32\u53e3\u5728 Windows \u548c Ubuntu \u7cfb\u7edf\u4e2d\u7684\u8bbe\u5907\u540d\u79f0\u4e0d\u540c\uff0c\u4f8b\u5982\uff1aWindows \u7cfb\u7edf\u663e\u793a\u4e3a COM*\uff0cUbuntu \u7cfb\u7edf\u663e\u793a\u4e3a /dev/ttyUSB*\u3002"]}),"\n",(0,s.jsxs)(n.p,{children:["3. \u8fd0\u884c\u8be5\u811a\u672c\u53ef\u5728\u5f53\u524d\u76ee\u5f55\u751f\u6210",(0,s.jsx)(n.code,{children:"JT16_angle_correction_ *\u5f53\u524d\u65f6\u95f4*.dat"}),"\u7684\u89d2\u5ea6\u4fee\u6b63\u6587\u4ef6\u4ee5\u53ca\u5bf9\u5e94\u7684 log \u6587\u4ef6\u3002"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);